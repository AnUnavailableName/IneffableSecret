### TCP/IP协议及网络通信原理

<center>2023年9月19日</center>

* 主要目的
> 搞清楚tcp/ip协议群的运行模型，虽然细节上有些不同，但很多共同的流程都抽象出来了；搞清楚数据发送加工过程中数据包的逻辑头是什么意思，由什么决定，在解码过程中发挥什么作用。

* TCP/IP的含义
> 传输控制协议/网际协议。网络上使用的一组完整的标准网络连接协议。指的是internet所使用的整个协议簇。

* TCP/IP是互联网协议市场标准。

* TCP协议的三次握手、四次挥手的意义
> 三次握手目的是客户端和服务端互相确认由发送和接收数据的能力。也就是任何一方必须有一个给对方发送，再从对方那接收的过程，来确认对方有收发能力，假如两次握手，服务端仅收到一次请求，但不能证明客户端可以正常接收。
> 四次挥手的原因是，TCP是一种全双工模式，意味着当客户端发送FIN报文段时，客户端数据已经发送完毕，但仍可以接收服务端的数据，服务端的ack仅表示已收到；服务端也发送FIN报文表示服务端没有数据要发送了，客户端ack表示已收到。

* TCP协议规定了服务器的保活计时器机制，类似于看门狗机制。正常收到客户端数据会重置，及时结束未收到会发送探测报文，连续十次无回复会自动断开。

* IP地址的划分
> 32位ip地址总共有43亿个左右，无法满足需求――nat技术（net address translation）在路由器实现，外部用公网ip，到内网转化为内网IP。
> 内网IP段：a类、b类、c类分别有一段私网IP
10.0.0.0~10.255.255.255               16,777,214
172.16.0.0~172.31.255.255             1,048,576
192.168.0.0~192.168.255.255           65536
> a类地址：1.0.0.1~126.255.255.255    128个
> b类地址：128~191                    64
> c类地址：192~223                    32
> d类地址：组播

* 子网掩码
> 内网ip分段方法，掩码位对应网段，后面主机位。a类8位，b类16位，c类24位。
主机位0独立为网络号，主机全1为广播地址。.1为起始IP，.254为结束IP。

* WAN口跟LAN口的区别
> WAN口连接外网，LAN口连接内网。每个口都要一个自己的网卡。

* 对于客户端对网页服务器的访问，每次打开一个新标签页，都会产生一个新的端口，所以对于服务器而言，客户端端口是随机的。端口随机是联网应用多开的基础，否则端口占用之后就不能开另外一个相同的应用。

<center>2023年10月23日</center>

1. 当日计划――完成计算机网络课程的day2内容和day3内容
2. 学习笔记
  1.　文字编码

  ```
  * 编码问题
  > 一个英文字母――1字节；
  > 一个汉字――2字节（gbk，gbk2312），3字节（utf-8）

  * 一个字节与ASCII码
  > 1个字节总共有256个编码；ASCII码只取了一半，即0-127共128个。

  * GB2312编码
  > GB2312编码1980年发布，共收录汉字6763个，仅常用的汉字，在缺少编码的情况下显示框。

  * GBK编码
  > 1995年发布，兼容gb2312编码，在此基础上扩充。比较全，不太会变成方框。

  * 万国码unicode
  > 4个字节一个字符，把所有国家的语言的字符收录进来。
  > 老美不乐意，所以进一步迭代了utf-8编码，可变长字符编码。

  * 修改文件的编码
  >　内存里一直用的是万国码，所以复制什么东西都不会乱码。也就是说复制过程中存在编码转换。
  ```

  2. linux相关的dns解析命令

  ```
  * 客户端的端口不固定的目的一部分是为了安全，防止被截获。但是路由器可以拦截访问特定服务器的包。

  * 打开网站的网络流程
  > 一、将域名解析成ip  二、访问目标网站的ip+端口
  > http:// 端口80  明文
  > https:// 端口443 密文

  * Linux下的dns指令
  > 安装yum install bind-utils

  * ikuai路由器的dns加速服务即强制使用固定的dns服务器，并且自身在提供dns缓存服务，这导致任何的向网段外的主机发送的dns请求都会被“劫持”并改成ikuai路由器中设定的dns地址。假如在网段内设定dns服务器并且发送dns域名解析请求，就不会走ikuai路由器，也就不会被“劫持”。

  * 命令的使用
  > 

  ```

<center>2023年10月24日</center>

1. 当日计划――看完day4的所有内容
2. 学习笔记
  1. 实战操作抓包
  ```
  # 在centos7系统下安装vsftpd
  # 开始的时候连不上yum仓库->ping www.baidu.com不通->修改网络配置
  sudo vi /etc/sysconfig/network-scripts/ifcfg-ens33  # 打开网卡配置文件
  ONBOOT=no -> ONBOOT=yes # 修改文件
  reboot  # 重启

  sudo yum install -y vsftpd  # 安装
  systemctl start vsftpd  # 启动
  systemctl status vsftpd # 查看软件运行状态

  # 查看网络端口的状态
  yum install -y net-tools  # 安装net-tools
  netstat -lntup  # 查看网络状态，进程、端口
  
  * FTP协议明文写，保密性差
  
  ```
  2. ddos攻击如何防御
  ```
  * 概念
  > 利用三次握手发动攻击的方式叫做ddos攻击
  > dos攻击：从一个IP发送过来的，封IP就好了
  > ddos攻击：不同的肉鸡访问服务器，没法防御。

  * 如何防御ddos
  > 提升宽带，企业宽带，成本高，可持续性差。
  > 购买阿里云的高防IP。要提前买。
  ```