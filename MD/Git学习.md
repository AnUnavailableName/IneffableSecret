### Git学习笔记

### 一、git的基本操作

* 1. git init 
  git初始化。
* 2. git config
  仅需进行一次的用户信息配置。
  git config --global user.email "you@xxx.com"
  git config --global user.name "your name"
* 2. git status
  检测当前文件状态。
    * 红色：新增文件/修改过但未暂存的文件； --》 git add 文件名/.
    * 绿色：已经暂存的文件； --》 git commit -m '描述信息'
* 3. git reset
  对于已提交的版本链进行回滚。git reset --hard 版本号（哈希值）
  但是这会将最新的版本被从log的详情中删除，但是事实上没有删除快照，可以用**git reflog**来查询哈希值来重新恢复。
  关于这里为什么有一个--hard，是因为这个命令用的最多，是直接从往期版本恢复到工作区。还有--soft是恢复到暂存区，git reset HEAD是从暂存区恢复到工作区作为暂存的逆操作，完成后会变成红色文件。
* 4. git checkout
  将当前工作区的没有暂存的改动（红色文件）恢复成上次提交的状态。
* 5. git branch
  查询分支情况。
  git branch 分支名 ――创建新的分支
  git checkout 分支名 ――转到指定的分支
  git branch -d 分支名  ――删除一个分支
* 6. git merge 分支
  合并分支。当前处于A分支，那么运行git merge B，就是把B分支的最新提交合并过来。
  git merge --abort 分支  ――放弃某一个分支的所有改动
* 7. git remote add origin 远程仓库地址
  给远程仓库起别名。
* 8. git push -u origin 分支
  将分支推送到远程仓库。
* 9. git clone 远程仓库地址
  从远程仓库拉取项目。
* 10. git pull origin dev
  拉取新的进度，仅新版本。[这里注意这个dev是远程仓库的分支，本地永远是拉取到当前分支。]
* 11. git rebase
  rebase（变基）――使git记录变得简洁。
  * git rebase -i 版本号/HEAD~x 将从最新版本到某一次提交的中间所有的版本都纳入处理，s合并并进行重命名。
  注意：在做代码合并时最好不要将已经提交到远程仓库的记录合并进去。否则会很麻烦，因为远程的和本地的记录不一致。
  * git rebase 分支 ――将当前分支的最新记录重定位到指定分支，再通过merge合并到指定分支，可以实现将分支线性化合并到一条线。
    
### 二、git的原理知识

  1. 三大区域
  分为工作区、暂存区、本地仓库。
  工作区中分为三种文件（自动检测）――已管理文件（已存在于本地仓库中且未修改的文件）、新增文件/已修改文件、已提交暂存区但未上传的文件。
  2. 合并产生的冲突
  由于可能存在新分支是在master分支较旧的版本上创建，而在想要合并到master分支时会发现已经有新版本了。这时就会产生冲突。命令行会提示哪些文件存在冲突，要求合并冲突后再手动进行add和commit。此时的状态会是unmerged paths。
  此时这个文件里会标明所有不同的地方，我们需要手动去修改，或者使用并git merge --abort 分支来放弃某一分支的改动，且完成后进行add和commit。






### 三、git的重要应用场景
  1. 由于各种因素，导致软件功能反复的下线和上线。
  需求：保留各个版本，不仅可以回溯到原始版本，也不能彻底丢弃舍弃的版本，以备可能的恢复。

  2. 在基于最新的提交版本做新功能开发时，发现了已提交版本的bug。
  需求：在保存已开发的功能的前提下，去修改原来文件的bug。
  思路：创建一个新的bug分支，修复bug，修复完成后合并回master分支；新功能依然是独立开发，后面也将合并到修复完bug的master分支上的版本之后。

  3. 两地开发问题。在家写代码和在公司写代码，如何实现无缝衔接。
  需求：保证项目的完整性和连贯性。
  思路：将dev提交并推送到远程仓库的dev分支，在家中切换到dev分支，拉取远程仓库dev分支最新的版本，修改后上传。


### 四、使用建议（规范）
  1. 至少要有2个分支――master和dev。master上仅保留稳定成熟的版本，dev（即development）分支上存放日常开发的中间版本。所谓的公测版即正在开发的趋于稳定的版本，等到认为它完全成熟之后，合并到master上作为正式版/发行版。
  2. 注意在将dev分支merge到master上之后，假如要继续在dev分支上进行开发。那么由于dev上没有master上最新的代码，这时候要将master最新的版本合并到dev分支。


### 五、Github的使用
  1. 创建远程仓库
  注册GitHub帐号并且进入后，点击new repository，创建新的仓库，将仓库信息填写完毕创建。


新增文件 touch 文件名
git的版本更迭，**仅保留变动的部分**，通过版本指针，生成快照。
分支的必要性在于，让两个功能独立开发，都基于同一个版本进行更改，在完成之后可以将两个版本重新合并起来！！
gitlab 自主搭建代码管理服务器。
注意对于冲突的管理，可以看作是以文件为单位的，虽然我们可以视为拥有多个版本c1、c2、c3，但是可能对于其中一个文件，c2中没有更改，这样的话对于这个文件只有两个版本c1、c3。当进行合并的时候，两个版本追根溯源一定有一个共同的参考版本，假如两个分支对于这个共同的参考版本都做了更改，
